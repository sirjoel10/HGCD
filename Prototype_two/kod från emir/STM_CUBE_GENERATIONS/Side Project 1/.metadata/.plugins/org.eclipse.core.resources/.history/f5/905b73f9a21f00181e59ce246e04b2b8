#include "string.h"
#include "UART_Handler.h"
#include "main.h"
#include "stm32l4xx_hal.h"

//Private functions

inline void loadMsTimer (uint16_t mS);

extern g Globals;
extern UART_HandleTypeDef huart2;
extern uint8_t txBuffer[10];
extern uint8_t rxBuffer[10];
extern uint8_t Buffer3[10];

void uartCommsHandler(void)
{
	if(Globals.msTimer)
	{
		return;
	}
	else
	{
		clearString(txBuffer);
		HAL_NVIC_DisableIRQ(USART2_IRQn);
		copyString(Buffer3, txBuffer);
		HAL_NVIC_EnableIRQ(USART2_IRQn);
		HAL_UART_Transmit_IT(&huart2, txBuffer, 7);
		loadMsTimer(10000);

	}
}

inline void loadMsTimer (uint16_t mS)
{
	Globals.msTimer = mS;
}
